{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nishimweelysee/Desktop/eshopping/martfury-admin-react/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/nishimweelysee/Desktop/eshopping/martfury-admin-react/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/nishimweelysee/Desktop/eshopping/martfury-admin-react/components/shared/cards/CardImageUploader.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { Modal, Upload } from 'antd';\n\nvar getBase64 = function getBase64(file) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = function () {\n      return resolve(reader.result);\n    };\n\n    reader.onerror = function (error) {\n      return reject(error);\n    };\n  });\n};\n\nvar CardImageUploader = function CardImageUploader(props) {\n  _s();\n\n  var _useState = useState(false),\n      previewOpen = _useState[0],\n      setPreviewOpen = _useState[1];\n\n  var _useState2 = useState(''),\n      previewImage = _useState2[0],\n      setPreviewImage = _useState2[1];\n\n  var _useState3 = useState(''),\n      previewTitle = _useState3[0],\n      setPreviewTitle = _useState3[1];\n\n  var _useState4 = useState([]),\n      fileList = _useState4[0],\n      setFileList = _useState4[1];\n\n  var handleCancel = function handleCancel() {\n    return setPreviewOpen(false);\n  };\n\n  var handlePreview = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!file.url && !file.preview)) {\n                _context.next = 4;\n                break;\n              }\n\n              _context.next = 3;\n              return getBase64(file.originFileObj);\n\n            case 3:\n              file.preview = _context.sent;\n\n            case 4:\n              setPreviewImage(file.url || file.preview);\n              setPreviewOpen(true);\n              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handlePreview(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(_ref2) {\n    var newFileList = _ref2.fileList;\n    setFileList(newFileList);\n\n    if (newFileList.length > 0) {\n      props.onChange(newFileList);\n    }\n  };\n\n  var uploadButton = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8\n      },\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, _this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Upload, {\n      listType: \"picture-card\",\n      name: props.name || 'file',\n      fileList: fileList,\n      multiple: props.multiple || false,\n      onPreview: handlePreview,\n      onChange: handleChange,\n      children: fileList.length >= props.number ? null : uploadButton\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: previewOpen,\n      title: previewTitle,\n      footer: null,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"example\",\n        style: {\n          width: '100%'\n        },\n        src: previewImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(CardImageUploader, \"Usr85ne76JI9WFXNoAEBJtnQfHc=\");\n\n_c = CardImageUploader;\nexport default CardImageUploader;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardImageUploader\");","map":{"version":3,"sources":["/Users/nishimweelysee/Desktop/eshopping/martfury-admin-react/components/shared/cards/CardImageUploader.js"],"names":["React","useState","PlusOutlined","Modal","Upload","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","CardImageUploader","props","previewOpen","setPreviewOpen","previewImage","setPreviewImage","previewTitle","setPreviewTitle","fileList","setFileList","handleCancel","handlePreview","url","preview","originFileObj","name","substring","lastIndexOf","handleChange","newFileList","length","onChange","uploadButton","marginTop","multiple","number","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { Modal, Upload } from 'antd';\n\nconst getBase64 = (file)=>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = (error) => reject(error);\n  });\n\nconst CardImageUploader= (props) => {\n  const [previewOpen, setPreviewOpen] = useState(false);\n  const [previewImage, setPreviewImage] = useState('');\n  const [previewTitle, setPreviewTitle] = useState('');\n  const [fileList, setFileList] = useState([]);\n\n  const handleCancel = () => setPreviewOpen(false);\n\n  const handlePreview = async (file) => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj);\n    }\n\n    setPreviewImage(file.url || (file.preview));\n    setPreviewOpen(true);\n    setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));\n  };\n\n  const handleChange = ({ fileList: newFileList }) =>{\n    setFileList(newFileList);\n    if(newFileList.length > 0){\n      props.onChange(newFileList);\n    }\n  }\n\n  const uploadButton = (\n    <div>\n      <PlusOutlined />\n      <div style={{ marginTop: 8 }}>Upload</div>\n    </div>\n  );\n  return (\n    <>\n      <Upload\n        listType=\"picture-card\"\n        name={props.name||'file'}\n        fileList={fileList}\n        multiple={props.multiple||false}\n        onPreview={handlePreview}\n        onChange={handleChange}\n      >\n        {fileList.length >= props.number ? null : uploadButton}\n      </Upload>\n      <Modal open={previewOpen} title={previewTitle} footer={null} onCancel={handleCancel}>\n        <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n      </Modal>\n    </>\n  );\n};\n\nexport default CardImageUploader;"]},"metadata":{},"sourceType":"module"}