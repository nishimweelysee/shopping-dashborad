{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport ContainerDefault from '~/components/layouts/ContainerDefault';\nimport Pagination from '~/components/elements/basic/Pagination';\nimport TableProjectItems from '~/components/shared/tables/TableProjectItems';\nimport { Select } from 'antd';\nimport Link from 'next/link';\nimport HeaderDashboard from '~/components/shared/headers/HeaderDashboard';\nimport { connect, useDispatch } from 'react-redux';\nimport { toggleDrawerMenu } from '~/store/app/action';\nimport ProductRepository from '~/repositories/ProductRepository';\nimport router from 'next/router';\nconst {\n  Option\n} = Select;\n\nconst ProductPage = () => {\n  const dispatch = useDispatch();\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  const {\n    0: selectedProduct,\n    1: setSelectedProduct\n  } = useState({});\n  const {\n    0: pagination,\n    1: setPagination\n  } = useState({\n    page: 0,\n    size: 5,\n    totalPages: 0,\n    totalElements: 0,\n    activePage: 0\n  });\n\n  const initializeProducts = async () => {\n    const prods = await ProductRepository.findAll(pagination.page, pagination.size);\n    setProducts([...prods.result.content]);\n    setPagination(_objectSpread(_objectSpread({}, pagination), prods.result));\n  };\n\n  const next = async () => {\n    if (pagination.number < pagination.totalPages - 1) {\n      const foundProduct = await ProductRepository.findAll(pagination.number + 1, pagination.size);\n      setProducts([...foundProduct.result.content]);\n      setPagination(_objectSpread(_objectSpread({}, pagination), foundProduct.result));\n    }\n  };\n\n  const prev = async () => {\n    if (pagination.number > 0) {\n      const foundProduct = await ProductRepository.findAll(pagination.number - 1, pagination.size);\n      setProducts([...foundProduct.result.content]);\n      setPagination(_objectSpread(_objectSpread({}, pagination), foundProduct.result));\n    }\n  };\n\n  const onPageNumberClick = async pageNumber => {\n    const foundProduct = await ProductRepository.findAll(pageNumber, pagination.size);\n    setProducts([...foundProduct.result.content]);\n    setPagination(_objectSpread(_objectSpread({}, pagination), foundProduct.result));\n  };\n\n  const handleEdit = async param => {\n    const foundProduct = await ProductRepository.findById(param);\n    setSelectedProduct(_objectSpread({}, foundProduct.result));\n    router.push({\n      pathname: '/products/create-product',\n      query: {\n        productId: foundProduct.result.id\n      }\n    });\n  };\n\n  const handleDelete = async param => {\n    await ProductRepository.deleteProduct(param);\n    initializeProducts();\n  };\n\n  useEffect(() => {\n    dispatch(toggleDrawerMenu(false));\n    initializeProducts();\n  }, []);\n  return /*#__PURE__*/_jsxs(ContainerDefault, {\n    title: \"Products\",\n    children: [/*#__PURE__*/_jsx(HeaderDashboard, {\n      title: \"Products\",\n      description: \"Cyamunara Product Listing \"\n    }), /*#__PURE__*/_jsxs(\"section\", {\n      className: \"ps-items-listing\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"ps-section__actions\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/products/create-product\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: \"ps-btn success\",\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"icon icon-plus mr-2\"\n            }), \"New Product\"]\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"ps-section__header\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"ps-section__filter\",\n          children: /*#__PURE__*/_jsxs(\"form\", {\n            className: \"ps-form--filter\",\n            action: \"index.html\",\n            method: \"get\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"ps-form__left\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxs(Select, {\n                  placeholder: \"Select Category\",\n                  className: \"ps-ant-dropdown\",\n                  listItemHeight: 20,\n                  children: [/*#__PURE__*/_jsx(Option, {\n                    value: \"clothing-and-apparel\",\n                    children: \"Clothing & Apparel\"\n                  }), /*#__PURE__*/_jsx(Option, {\n                    value: \"garden-and-kitchen\",\n                    children: \"Garden & Kitchen\"\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxs(Select, {\n                  placeholder: \"Select Category\",\n                  className: \"ps-ant-dropdown\",\n                  listItemHeight: 20,\n                  children: [/*#__PURE__*/_jsx(Option, {\n                    value: \"simple-product\",\n                    children: \"Simple Product\"\n                  }), /*#__PURE__*/_jsx(Option, {\n                    value: \"groupped-product\",\n                    children: \"Groupped product\"\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxs(Select, {\n                  placeholder: \"Status\",\n                  className: \"ps-ant-dropdown\",\n                  listItemHeight: 20,\n                  children: [/*#__PURE__*/_jsx(Option, {\n                    value: \"active\",\n                    children: \"Active\"\n                  }), /*#__PURE__*/_jsx(Option, {\n                    value: \"in-active\",\n                    children: \"InActive\"\n                  })]\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"ps-form__right\",\n              children: /*#__PURE__*/_jsxs(\"button\", {\n                className: \"ps-btn ps-btn--gray\",\n                children: [/*#__PURE__*/_jsx(\"i\", {\n                  className: \"icon icon-funnel mr-2\"\n                }), \"Filter\"]\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"ps-section__search\",\n          children: /*#__PURE__*/_jsxs(\"form\", {\n            className: \"ps-form--search-simple\",\n            action: \"index.html\",\n            method: \"get\",\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              className: \"form-control\",\n              type: \"text\",\n              placeholder: \"Search product\"\n            }), /*#__PURE__*/_jsx(\"button\", {\n              children: /*#__PURE__*/_jsx(\"i\", {\n                className: \"icon icon-magnifier\"\n              })\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"ps-section__content\",\n        children: /*#__PURE__*/_jsx(TableProjectItems, {\n          productItems: products,\n          handleDelete: handleDelete,\n          handleEdit: handleEdit\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"ps-section__footer\",\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          children: [\"Show \", pagination.numberOfElements, \" in \", pagination.totalElements, \" items.\"]\n        }), /*#__PURE__*/_jsx(Pagination, _objectSpread(_objectSpread({}, pagination), {}, {\n          next: next,\n          prev: prev,\n          onPageNumberClick: onPageNumberClick\n        }))]\n      })]\n    })]\n  });\n};\n\nexport default connect(state => state.app)(ProductPage);","map":null,"metadata":{},"sourceType":"module"}