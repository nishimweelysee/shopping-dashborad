{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nishimweelysee/Desktop/eshopping/martfury-admin-react/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/nishimweelysee/Desktop/eshopping/martfury-admin-react/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { Modal, Upload } from 'antd';\n\nvar getBase64 = function getBase64(file) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = function () {\n      return resolve(reader.result);\n    };\n\n    reader.onerror = function (error) {\n      return reject(error);\n    };\n  });\n};\n\nvar CardImageUploader = function CardImageUploader(props) {\n  var _useState = useState(false),\n      previewOpen = _useState[0],\n      setPreviewOpen = _useState[1];\n\n  var _useState2 = useState(''),\n      previewImage = _useState2[0],\n      setPreviewImage = _useState2[1];\n\n  var _useState3 = useState(''),\n      previewTitle = _useState3[0],\n      setPreviewTitle = _useState3[1];\n\n  var _useState4 = useState([]),\n      fileList = _useState4[0],\n      setFileList = _useState4[1];\n\n  var handleCancel = function handleCancel() {\n    return setPreviewOpen(false);\n  };\n\n  var handlePreview = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!file.url && !file.preview)) {\n                _context.next = 4;\n                break;\n              }\n\n              _context.next = 3;\n              return getBase64(file.originFileObj);\n\n            case 3:\n              file.preview = _context.sent;\n\n            case 4:\n              setPreviewImage(file.url || file.preview);\n              setPreviewOpen(true);\n              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handlePreview(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(_ref2) {\n    var newFileList = _ref2.fileList;\n    setFileList(newFileList);\n\n    if (newFileList.length > 0) {\n      props.onChange(newFileList);\n    }\n  };\n\n  var uploadButton = /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(PlusOutlined, {}), /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        marginTop: 8\n      },\n      children: \"Upload\"\n    })]\n  });\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Upload, {\n      listType: \"picture-card\",\n      fileList: fileList,\n      multiple: false,\n      onPreview: handlePreview,\n      onChange: handleChange,\n      children: fileList.length >= props.number ? null : uploadButton\n    }), /*#__PURE__*/_jsx(Modal, {\n      open: previewOpen,\n      title: previewTitle,\n      footer: null,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsx(\"img\", {\n        alt: \"example\",\n        style: {\n          width: '100%'\n        },\n        src: previewImage\n      })\n    })]\n  });\n};\n\nexport default CardImageUploader;","map":null,"metadata":{},"sourceType":"module"}